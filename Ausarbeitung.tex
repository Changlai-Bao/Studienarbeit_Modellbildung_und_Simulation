\documentclass[
    11pt,
    a4paper,
    sfdefaults=false,
    toc=chapterentrywithdots,
    %twoside,openright,
    oneside,openright,
    titlepage,
    parskip=half,
    headings=normal,  % reduces heading size
    listof=totoc,
    bibliography=totoc,
    index=totoc,
    captions=tableheading,  % caption below table
    %chapterprefix,
    listof=flat,
    final
]{scrbook}

\RedeclareSectionCommand[
  beforeskip=0mm, 
  afterskip=0mm    
]{chapter}

\RedeclareSectionCommand[
  beforeskip=0mm, 
  afterskip=1mm    
]{section}

% details about your thesis
\newcommand{\titel}{Modellierung und Simulation eines Doppelpendels und Dreifachpendels}
\newcommand{\artderarbeit}{Studienarbeit}
\newcommand{\untertitel}{für Modellbildung und Simulation}
\newcommand{\autor}{Changlai Bao}
\newcommand{\studiengang}{Elektronische und Mechatronische Systeme}
\newcommand{\matrikelnr}{3834688}
\newcommand{\keywords}{hot, fuzz}

% custom head and foot
\usepackage[automark]{scrlayer-scrpage}
\pagestyle{scrheadings}
\ihead{\headmark}
\chead{}
\ohead{\pagemark}
\renewcommand*\chaptermarkformat{\chapappifchapterprefix{\ }% 
\thechapter.\enskip}

\KOMAoption{headsepline}{true} % Linie unter Kopfzeile 
\KOMAoption{footsepline}{true} % Linie über Fußzeile
\addtokomafont{headsepline}{\color{red!80!black}}
\addtokomafont{footsepline}{\color{red!80!black}} 

\renewcommand*{\chapterpagestyle}{scrheadings} % Kopfzeile auf Kapitelseiten
\cfoot*{\pagemark} % Seitenzahl in der Mitte der Fußzeile

\RedeclareSectionCommand[tocindent=0pt]{section}
\RedeclareSectionCommand[tocindent=0pt]{subsection}
%\RedeclareSectionCommand[tocnumwidth=70pt]{chapter}

\usepackage{scrhack}

% other packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern,relsize,textcomp,csquotes}
\usepackage{amsmath,amsfonts}
\usepackage[english, ngerman]{babel}  % flip for German thesis
\usepackage[final]{graphicx}
\usepackage{setspace,geometry,xcolor}
\usepackage{makeidx}
\usepackage{paralist,ifthen,todonotes}
\usepackage{url}
\usepackage[toc]{glossaries}
\usepackage{pdfpages}
\usepackage{float}
\usepackage{subcaption}

% table setup
\usepackage{longtable}
\usepackage{array}
\usepackage{ragged2e}
\usepackage{lscape}

% pdf hyperref
\usepackage[
    bookmarks=true,
    bookmarksopen=true,
    bookmarksnumbered=true,
    bookmarksopenlevel=1,
    pdftitle={\titel},
    pdfauthor={\autor},
    pdfcreator={\autor},
    pdfsubject={\titel},
    pdfkeywords={\keywords},
    pdfpagelabels=true,
    colorlinks=true,
    linkcolor={red!80!black},
    urlcolor=magenta,
    anchorcolor=black,
    citecolor=cyan,
    filecolor=magenta,
    menucolor=red,
    plainpages=false,
    hypertexnames=true,
    linktocpage=true,
]{hyperref}

% configure your listings style
\usepackage{listings}
\lstset{
    tabsize=3,
    extendedchars=true,
    frame=single,
    showstringspaces=true,
    numbers=left,
    numberstyle=\small,
    breakautoindent=true,
    breaklines=true,
    commentstyle=\color{green!60!black},
    keywordstyle=\color{blue},
    stringstyle=\color{purple},
    basicstyle=\ttfamily\small,
    language=Matlab
}

% configure your glossaries
\usepackage{tcolorbox}
\tcbuselibrary{most}
\newtcbox{\codefile}{
  enhanced,
  nobeforeafter,
  tcbox raise base,
  boxrule=0.4pt,
  arc=4pt,
  fontupper=\ttfamily\small\color{black}, 
  colback=orange!30,
  colframe=orange!70!black, 
  top=0pt,
  bottom=0pt,
  left=3pt,
  right=3pt,
  boxsep=0pt,
  height=2.5ex,
  valign=center
}

% page setup
% \setlength{\topskip}{\ht\strutbox}
\geometry{paper=a4paper,left=2.5cm,top=3.0cm,bindingoffset=.8cm}
\onehalfspacing
\frenchspacing
\clubpenalty = 10000
\widowpenalty = 10000 
\displaywidowpenalty = 10000
\sloppy

% some commands
\newcommand{\ua}{\mbox{u.\,a.\ }}
\newcommand{\zB}{\mbox{z.\,B.\ }}
\newcommand{\dahe}{\mbox{d.\,h.,\ }}
\newcommand{\bzw}{\mbox{bzw.\ }}
\newcommand{\bzgl}{\mbox{bzgl.\ }}
\newcommand{\eg}{\mbox{e.\,g.\ }}
\newcommand{\ie}{\mbox{i.\,e.\ }}
\newcommand{\wrt}{\mbox{w.\,r.\,t.\ }}
\newcommand{\etal}{\mbox{\emph{et\,al.\ }}}


% TODO remove if not needed...
\usepackage{blindtext}

\begin{document}

\setcounter{secnumdepth}{3}  % numerate subsections
\setcounter{tocdepth}{2}  % ...but don't include them in toc

\frontmatter
\include{cover}

% download the following form (requires VPN) and complete it (hit save in your editor)
% https://intern.ohmportal.de/fileadmin/Public_Docs/SB/SB_0009_FO_Pruefungsrechtliche_Erklaerung_und_Erklaerung_zur_Veroeffentlichung_der_Abschlussarbeit_public.pdf
%\includepdf{SB_0009_FO_Pruefungsrechtliche_Erklaerung_und_Erklaerung_zur_Veroeffentlichung_der_Abschlussarbeit_public.pdf}\cleardoublepage

\setcounter{page}{1}
%\tableofcontents

\mainmatter
\include{content/01_Systembeschreibung}
\include{content/02_Zielsetzung}
\include{content/03_Anleitung}
\include{content/04_Simulationsergebniss}
%\include{content/Anhang}

\bibliographystyle{ieeetr}
\bibliography{refs}

\end{document}
